--- examples/web-browser.lisp
+++ examples/web-browser.lisp
@@ -2,62 +2,24 @@
 
 ;;; webbrowser.c
 
-(cffi:defcallback error-cb :int ((handle iup-cffi::ihandle) (url :string))
-  (declare (ignore handle))
-  (iup:message-error nil (format nil "Error: ~A" url))
-  iup::+default+)
-
-(cffi:defcallback newwindow-cb :int ((handle iup-cffi::ihandle) (url :string))
-  (setf (iup:attribute handle :value) url)
-  iup::+default+)
-
-(cffi:defcallback back-cb :int ((handle iup-cffi::ihandle))
-  (let ((web (iup:attribute handle :my_web)))
-    (setf (iup:attribute web :backforward) "-1"))
-  iup::+default+)
-
-(cffi:defcallback forward-cb :int ((handle iup-cffi::ihandle))
-  (let ((web (iup:attribute handle :my_web)))
-    (setf (iup:attribute web :backforward) "1"))
-  iup::+default+)
-
-(cffi:defcallback stop-cb :int ((handle iup-cffi::ihandle))
-  (let ((web (iup:attribute handle :my_web)))
-      (setf (iup:attribute web :stop) nil))
-  iup::+default+)
-
-(cffi:defcallback reload-cb :int ((handle iup-cffi::ihandle))
-  (let ((web (iup:attribute handle :my_web)))
-      (setf (iup:attribute web :reload) nil))
-  iup::+default+)
-
 (cffi:defcallback load-cb :int ((handle iup-cffi::ihandle))
-  (let* ((txt (iup:attribute handle :my_txt))
+  (let* ((txt (iup:attribute handle :my_text))
 	 (web (iup:attribute handle :my_web)))
+    (break)
     (setf (iup:attribute web :value) (iup:attribute txt :value)))
   iup::+default+)
 
-#+linux
-(cffi::defcallback history-cb :int ((handle iup-cffi::ihandle))
-  (let ((back (parse-integer (iup:attribute handle :backcount)))
-	(fwrd (parse-integer (iup:attribute handle :forwardcount))))
-    (loop for i from (- back) below 0 
-	  do (format t "Backaward ~A ~A" i (iup:attribute handle (format nil "ITEMHISTORY~A" i))))
-    (format t "Current: ~A" (iup:attribute handle :itemhistory0))
-    (loop for i from 0 to fwrd
-	  do (format t "Forward ~A ~A" i (iup:attribute handle (format nil "ITEMHISTORY~A" i))))))
-
 (defun web-browser ()
   (iup:with-iup ()
     (iup-web:web-browser-open)
     (let* ((web (iup-web:web-browser))
-	   (btn-back (iup:button :title "Back" :action 'back-cb))
-	   (btn-forward (iup:button :title "Forward" :action 'forward-cb))
+	   (btn-back (iup:button :title "Back" :action nil))
+	   (btn-forward (iup:button :title "Forward" :action nil))
 	   (text (iup:text :expand "HORIZONTAL" :value "https://lisp-lang.org"))
 	   (btn-load (iup:button :title "Load" :action 'load-cb))
-	   (btn-reload (iup:button :title "Reload" :action 'reload-cb))
-	   (btn-stop (iup:button :title "Stop" :action 'stop-cb))
-	   #+linux (btn-history (iup:button :title "History" :action 'history-cb))
+	   (btn-reload (iup:button :title "Reload"))
+	   (btn-stop (iup:button :title "Stop"))
+	   #+linux (btn-history (iup:button :title "History"))
 
 	   (dialog (iup:dialog
 		    (iup:vbox
@@ -69,16 +31,18 @@
 					    btn-stop
 					    #+linux btn-history))
 			   web)
-		     :expand "YES")
+		     :expand "HORIZONTAL")
 		    :title "IupWebBrowser"
-		    :margin "2x2"
-		    :gap "2"
-		    :rastersize "800x600"
-		    :my_web web
-		    :my_txt text)))
+		    :margin "5x5"
+		    :gap "5"
+		    ;; :my_web web
+		    ;; :my_text text
+		    )))
+      (setf (iup:attribute dialog :my_web) web)
+      (setf (iup:attribute dialog :my_txt) text)
       (iup:show dialog)
       (iup:main-loop))))
-
+	    
 #+nil
 (sb-int:with-float-traps-masked
     (:divide-by-zero :invalid)
